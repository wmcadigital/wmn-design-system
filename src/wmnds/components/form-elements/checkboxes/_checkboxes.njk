{% macro wmndsCheckboxes(params) %}

{# Imports #}
{% from "wmnds/components/form-elements/label/_label.njk" import wmndsLabel %}
{% from "wmnds/components/icon/_icon.njk" import wmndsIcon %}
{% from "wmnds/components/form-elements/question/_question.njk" import wmndsQuestion %}

{% set hasLegend = false if params.legend === "" else true %}
{% set legend = params.legend if params.legend %}
{% set hasDescription = false if params.legend === "" else true %}
{% set contentText = params.contentText if params.contentText else "Select all options that apply" %}
{% set contentHTML = params.contentHTML if params.contentHTML else null %}
{% set items = params.items if params.items %}
{% set class = " " + params.classes if params.classes %}
{% set _content = contentHTML | safe if contentHTML else contentText %} {# change content based on what user has input #}

<div class="wmnds-fe-group{{class}}">
  <fieldset class="wmnds-fe-fieldset">
    <legend class="wmnds-fe-fieldset__legend">
    {%- if hasLegend %}
    {{ 
      wmndsQuestion({
        text: legend
      }) | indent(6) | trim 
    }}
    {% endif -%}
    </legend>
    <div class="wmnds-fe-checkboxes">
      <span class="wmnds-fe-checkboxes__desc">
      {%- if hasDescription %}
      {{ _content }}
      {% endif -%}
      </span>
      {%- if items %}
        {%- for item in items %}
          {%- if item.checked !== null %}
          {%- set isChecked = (' checked="checked"' | safe) if item.checked === true  else "" %}
          {%- set isNotEditable = (' disabled="disabled"' | safe) if item.editable === false else "" %}
          {% endif -%}
          <label class="wmnds-fe-checkboxes__container">
            <div class="wmnds-m-b-lg">
              {%- if item.title %}
              <h3 class="wmnds-m-none wmnds-p-b-sm">{{item.title}}</h3>
              {%- endif -%}
              {%- if item.contentText -%}
              {{ item.contentText }}
              {% endif -%}
            </div>
            <input class="wmnds-fe-checkboxes__input" value="{{item.title}}" {{isChecked}} type="checkbox" {{isNotEditable}}/>
            <span class="wmnds-fe-checkboxes__checkmark">
              {{
                wmndsIcon({
                  icon: 'general-checkmark',
                  class: 'wmnds-fe-checkboxes__icon'
                }) | indent(8) | trim
              }}
            </span>
          </label>
        {%- endfor %}
      {%- else %} 
        {%- for i in range(1,4) %}
        {#- Set checked state on first item in loop #}
        {%- set isChecked = (' checked="checked"' | safe) if i === 1 %}
        <label class="wmnds-fe-checkboxes__container">
          Option {{i}}
          <input class="wmnds-fe-checkboxes__input" value="Option {{i}}"{{isChecked}} type="checkbox"/>
          <span class="wmnds-fe-checkboxes__checkmark">
            {# Get SVG icon and pass class #}
            {{
              wmndsIcon({
                icon: 'general-checkmark',
                class: 'wmnds-fe-checkboxes__icon'
              }) | indent(8) | trim
            }}
          </span>
        </label>
        {%- endfor %}
      {% endif -%}
    </div>
  </fieldset>
</div>
{% endmacro %}
